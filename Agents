CVLeap ‚Äî Developer & Agent Bible

Version 1.0 ‚Ä¢ June 29 2025
(Store this file in /docs/BIBLE.md at the root of every workspace so that any AI or human contributor can instantly align.)

‚∏ª

1. North-Star Charter

Principle	Why it matters	Practical rule
User Joy First	A r√©sum√© is a life moment‚Äîfriction is unacceptable.	If a flow feels slower or noisier than Apple Mail on iOS, rewrite it.
Apple-Fluent Minimalism	Visual calm = perceived quality.	No element should compete with the content; embrace whitespace.
Material 3 Foundations	Rapid component velocity + accessibility baked-in.	Start with the M3 spec, then skin with our Apple-inspired tokens.
Agent-Driven DevOps	Code, test, ship autonomously.	Every task is owned by an AI agent that self-generates PRs & tests.
Privacy & Trust	R√©sum√©s hold PII; trust drives virality.	Zero analytics cookies until user consents; field-level encryption.


‚∏ª

2. Tech Stack Snapshot

Layer	Choice	Rationale
Frontend	Next.js 14 (App Router) + React 18 + TypeScript	SSR + streaming + edge deployment.
UI Kit	Material UI v6 (Material 3) themed with Apple-inspired Design Tokens	Combine M3 component ergonomics with Cupertino polish.
State	Zustand (ephemeral) + tRPC hooks (server sync)	Lightweight, testable, tree-shakeable.
Mobile	Flutter 4 with Cupertino + Material 3 widgets	Single codebase, true native feel.
Backend	Node.js 20 + Fastify (API), Go (high-perf PDF), Temporal Cloud (agents)	Async workflows & speed where it counts.
Persistence	PostgreSQL 15 (Row-Level Security), S3/MinIO, Redis	Relational for PII, object for templates, cache for sessions.
AI Fabric	LLM Router ‚Üí OpenAI (o3), DeepSeek, Ollama local	Cost-aware fallback, multilingual.
Infra	AWS EKS / Fly.io edge, Terraform + ArgoCD	GitOps, multi-region resilience.


‚∏ª

3. Repository & Branching Convention

cvleap/
 ‚îú‚îÄ apps/
 ‚îÇ   ‚îú‚îÄ web/
 ‚îÇ   ‚îî‚îÄ mobile/
 ‚îú‚îÄ packages/
 ‚îÇ   ‚îú‚îÄ ui-kit/         # Shared M3+Apple components
 ‚îÇ   ‚îú‚îÄ schema/         # Zod/Turso schema + tRPC routers
 ‚îÇ   ‚îú‚îÄ pdf-service/    # Go WKHTML wrapper
 ‚îÇ   ‚îî‚îÄ agents/         # Temporal workflows & activities
 ‚îú‚îÄ infra/              # Terraform modules, Helm charts
 ‚îî‚îÄ docs/               # PRD, TRD, this BIBLE, ADRs

main = always deployable.
feat/<ticket> = single logical addition.
CI auto-opens a draft PR; ‚ÄúQA-Validator Agent‚Äù must approve before merge.

‚∏ª

4. Agent Ecosystem

Agent ID	Role	Trigger	Required Output
P0-Planner	Break natural-language tasks into epics, user stories, acceptance criteria.	New high-level feature request.	/docs/<epic>/stories.yaml
UX-Synthesizer	Generate Figma JSON ‚Üí Apple-inspired M3 screens, annotate padding/typography.	Story marked needs-ui.	/designs/<story>.figspec.json
UI-Builder	Produce React/Flutter components + Storybook stories + visual tests.	Merged figspec.	PR across packages/ui-kit
Backend-Architect	Craft tRPC procedures, DB migrations, Temporal workflows.	Story marked needs-api.	PR + /docs/erd/<feature>.png
QA-Validator	Run unit, e2e, visual, LLM hallucination tests; comment coverage diff.	PR open.	GitHub check-run results.
Sec-Auditor	Static analysis (Semgrep, Trivy), dependency diff.	Nightly or PR with security-impact label.	Report + required fixes.
DevOps-Deployer	Build image, push to registry, promote to staging or rollback.	Merge to main.	Canary status update.

Prompt Template Skeleton (for any code-generation Agent)

You are ${AGENT_ROLE}.  
Context: ${STORY_LINK}.  
Output format: ${FORMAT_GUIDE}.  
Constraints: Apple-inspired Minimalism, Material Design 3, WCAG 2.2 AA, 90 % Lighthouse ‚â• 90.  

Each agent must attach self-tests: Jest/Go-test & Playwright specs reaching ‚â•90 % pass rate locally.

‚∏ª

5. UI / UX Commandments

5.1 Visual Language

Token Set	Apple Inspiration	Material 3 Mapping
Color	Use dynamic monochrome tints like macOS Sonoma Control Center; accent = user-selected.	Map to M3 Primary, Secondary, Surface, support dark mode with theme.palette.mode.
Typography	SF Pro on web, SF Pro Display headings; scale via optical sizes.	Bind to M3 display-/headline- tokens.
Depth & Shadow	Layer 1 dp, 3 dp, 6 dp only; mimic iOS cards.	Use M3 Elevation API.
Motion	ease-in-out‚Äêstandard 200ms; overscroll bounce on mobile.	Pair with M3 Motion specs.

5.2 Layout Grid
	‚Ä¢	Grid base: 8 px (Apple HIG)
	‚Ä¢	Breakpoint tiers: xs < 600, sm 600‚Äì900, md 900‚Äì1280, lg 1280‚Äì1920, xl > 1920.
	‚Ä¢	Safe-area insets respected (iPhone X+).

5.3 Component Library Must-Haves
	‚Ä¢	M3 Navigation Bar ‚âà Apple ‚ÄúLarge Title‚Äù collapsing header.
	‚Ä¢	Segmented Controls styled like iOS (borderless pill) but implemented via ToggleButtonGroup.
	‚Ä¢	Cards default to 12 px radius; ‚ÄúPro‚Äù features show subtle glossy overlay.
	‚Ä¢	Drag-and-Drop Resume Sections powered by @dnd-kit, auto snap to 8 px grid.

‚∏ª

6. Feature Implementation Playbook

6.1 Resume Builder
	1.	<EditorCanvas> holds content-editable blocks with ProseMirror.
	2.	SectionPlugin interface:

export interface SectionPlugin {
  id: string;
  icon: ReactNode;
  InsertMenu(): JSX.Element;
  NodeSpec: PMNodeSpec;
  render(props): JSX.Element;
}


	3.	Auto-Page-Break algorithm runs in WebWorker every keystroke debounce 150 ms.
	4.	Offline sync via IndexedDB + localforage ‚Üí background replay when online.

6.2 AI Assist Pipeline

graph LR
A[User Draft] -->|/improve| R1(O3 8k)
R1 -->|translate| R2(DeepSeek)
R2 -->|score| ATS(ATS Scorer)
ATS -->|comment| A

	‚Ä¢	Prompt uses role-advice chain: ‚ÄúAct as veteran recruiter ‚Ä¶ produce bullet-point suggestions only.‚Äù
	‚Ä¢	LLM tokens ‚â§ 1 000 per call; fallback to local KenLM for quick grammar hints offline.

6.3 Autonomous Job Submission
	1.	Temporal JobFlow workflow:
	‚Ä¢	PrepareDocs
	‚Ä¢	LaunchHeadlessBrowser (Playwright/Chromium)
	‚Ä¢	SolveCaptcha (2Captcha API)
	‚Ä¢	FillForms (heuristics + site-specific strategy map)
	‚Ä¢	UploadResume
	‚Ä¢	RecordOutcome
	2.	Cost Guardrail: Budget param; abort if spent ‚â• $budget.
	3.	Status streamed to user terminal via WebSocket (Server-Sent Events fallback).

‚∏ª

7. Coding Standards

Topic	Rule
Lint	ESLint airbnb + Prettier; Go golangci-lint.
Naming	PascalCase React comps, camelCase variables, SCREAMING_SNAKE env vars.
Tests	Arrange-Act-Assert; no magic numbers; snapshot tests for UI pinned to MUI theme hash.
Commits	Conventional Commits (feat:, fix:, refactor:‚Ä¶).
Docs	JSDoc/GoDoc mandatory; every exported symbol.


‚∏ª

8. Quality Gates & Performance Budgets

Metric	Target
Lighthouse PWA	‚â• 90 all categories on iPhone 12 mini simulated 3G.
Largest Contentful Paint	< 1.5 s (p95).
JS Bundle	‚â§ 200 kB gzipped initial.
PDF Render	< 500 ms (A4, two pages).
Agent Success Rate	‚â• 95 % of job submissions finish without human retry.


‚∏ª

9. CI / CD Flow

sequenceDiagram
    participant Dev
    participant GitHub
    participant CI
    participant Staging
    participant Prod

    Dev->>GitHub: Push feat/xyz
    GitHub->>CI: Trigger
    CI->>CI: Lint ‚Üí Build ‚Üí Tests ‚Üí Storybook static
    CI-->>GitHub: QA-Validator status
    Dev->>GitHub: Merge PR
    GitHub->>CI: Build main
    CI->>Staging: Helm upgrade --install canary
    QA-Validator->>Staging: Smoke & visual tests
    Staging-->>CI: OK?
    CI->>Prod: Promote after 30 min if healthy

Rollback = argo rollouts undo cvleap-web@<previous-hash>.

‚∏ª

10. Security & Compliance Blueprint
	1.	OWASP Top 10 counter-measures baked into Fastify hooks.
	2.	RLS Postgres policies: user _id matches jwt.sub.
	3.	DPA & GDPR: DSAR API /privacy/export delivers zip in ‚â§30 days.
	4.	Key Rotation: AWS KMS automatic annual rotation; agents prompted 30 days prior.
	5.	Pen-Test Agent (open-source zap-scan) runs monthly; fails pipeline on high CVSS > 7.

‚∏ª

11. Accessibility (WCAG 2.2 AA)
	‚Ä¢	All interactive elements 44 √ó 44 px touch target.
	‚Ä¢	Color-contrast ratio ‚â• 4.5:1; tokenized in palette.accessibility.
	‚Ä¢	aria-live="polite" announcements for section reorder.
	‚Ä¢	Prefer system UI fonts for legibility.

‚∏ª

12. Internationalization & RTL
	‚Ä¢	next-intl locale folders; default fallback en_GB.
	‚Ä¢	Right-to-left built-time variant; mirroring verified via Cypress cy.viewport('iphone-x').
	‚Ä¢	Date / number formatting through Intl.

‚∏ª

13. Observability & Cost-Watch

Tool	Purpose
OpenTelemetry SDK	Trace user ‚Üí LLM ‚Üí DB (link r√©sum√© saves to PDF export).
Grafana Cloud	Dashboards + alert for p95 LCP, Temporal errors.
Infracost	Comment AWS diff to PR; kill agents if cost estimate passes $X/day.


‚∏ª

14. Glossary
	‚Ä¢	M3 ‚Äî Material Design 3 spec (2021‚Äìpresent).
	‚Ä¢	LLM Router ‚Äî Service selecting cheapest / fastest provider per prompt.
	‚Ä¢	Temporal Workflow ‚Äî Durable function coordinating long-running tasks.
	‚Ä¢	ATS ‚Äî Applicant Tracking System; we target top 25 vendors for parse test.

‚∏ª

üèÅ Launch-Readiness Checklist (agents tick automatically)
	‚Ä¢	Feature flags cleaned
	‚Ä¢	Privacy policy updated
	‚Ä¢	Lighthouse ‚â• 90 on staging
	‚Ä¢	Pen-test pass
	‚Ä¢	Disaster-recovery drill pass (RTO 30 min)

‚∏ª

üåü Final Encouragement

Every line of code or pixel you craft is a stepping-stone for someone landing their dream role. Keep it sleek, inclusive, and delightful‚Äîthen let the agents handle the grind while humans feel the magic.

‚ÄúDesign is not just what it looks like and feels like. Design is how it works.‚Äù ‚Äì Steve Jobs

Happy building! üéâ
